import { Component, Inject, Input, ViewChild } from '@angular/core';
import moment from 'moment';
import { DOCUMENT } from '@angular/common';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export class DatepickerComponent {
    constructor(document, cdRef) {
        this.document = document;
        this.cdRef = cdRef;
        this.show = false;
        this.format = "YYYY-MM-DD HH:mm:ss";
        this.config = {
            mode: "datetime",
            view: "datepicker",
            timepicker: '',
            position: {
                x: 0,
                y: 0
            },
            startYear: new Date().getFullYear(),
            icons: {
                left: "ðŸ¡°",
                right: "ðŸ¡²",
                up: "ðŸ¡±",
                down: "ðŸ¡³"
            },
            weeks: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thirsday", "Friday", "Saturday"],
            months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
        };
        this._value = "";
        this.onApply = (_v) => { };
    }
    get value() {
        return this._value;
    }
    set value(value) {
        if (value !== "" && value !== null && typeof value !== "undefined") {
            if (moment(value, this.format).isValid()) {
                this._value = value;
            }
            else {
                console.log("Invalid date");
            }
        }
    }
    trackBy(n) {
        return n;
    }
    getPrefixDays() {
        var date = moment(this.value, this.format).startOf('month');
        var day = Number(date.format("d"));
        return new Array(day);
    }
    getDatesInMonthArray() {
        var dates = [];
        var a = moment(this.value, this.format).startOf('month').format('YYYY-MM-DD');
        var b = moment(this.value, this.format).endOf('month').format('YYYY-MM-DD');
        for (var m = moment(a); m.diff(b, 'days') <= 0; m.add(1, 'days')) {
            dates.push({
                date: m.format('D'),
                formated: m.format("YYYY-MM-DD")
            });
        }
        return dates;
    }
    getDaysInMonth() {
        return new Array(moment().daysInMonth());
    }
    getArrayOf(n) {
        return new Array(n);
    }
    titleCase(str) {
        return str.toLowerCase().replace(/\b(\w)/g, s => s.toUpperCase());
    }
    prefixZero(n) {
        return ('0' + n).slice(-2);
    }
    limitChar(str, n) {
        return str.substring(0, n);
    }
    setNextYearRange() {
        this.config.startYear = this.config.startYear + 15;
    }
    setPrevYearRange() {
        this.config.startYear = this.config.startYear - 14;
    }
    setNextMonth() {
        this.value = moment(this.value, this.format).add(1, "M").format(this.format);
    }
    setPrevMonth() {
        this.value = moment(this.value, this.format).add(-1, "M").format(this.format);
    }
    getYearsRange() {
        var years = [];
        var startYear = this.config.startYear - 8;
        var endYear = this.config.startYear + 7;
        for (var y = startYear; y <= endYear; y++) {
            years.push(y);
        }
        return years;
    }
    setPosition() {
        var inst = this;
        var directiveRect = inst.element.nativeElement.getBoundingClientRect();
        var containerRect = inst.container.nativeElement.getBoundingClientRect();
        if (window.innerWidth <= 600 || window.innerHeight <= 600) {
            inst.config.position.x = (window.innerWidth - containerRect.width) / 2;
            inst.config.position.y = (window.innerHeight - containerRect.height) / 2;
            inst.cdRef.detectChanges();
            return {
                container: containerRect,
                directive: directiveRect
            };
        }
        if (window.innerHeight <= directiveRect.height + containerRect.height + directiveRect.y) {
            // inst.config.position.x = directiveRect.x;
            // inst.config.position.y = ((directiveRect.y - containerRect.height) + directiveRect.height) - directiveRect.height;
            inst.config.position.x = (window.innerWidth - containerRect.width) / 2;
            inst.config.position.y = (window.innerHeight - containerRect.height) / 2;
        }
        else if (window.innerWidth <= directiveRect.width + containerRect.width + directiveRect.x) {
            inst.config.position.y = directiveRect.y + directiveRect.height;
            inst.config.position.x = ((directiveRect.x - containerRect.width) + directiveRect.width);
        }
        else {
            inst.config.position.x = directiveRect.x;
            inst.config.position.y = directiveRect.y + directiveRect.height;
        }
        inst.cdRef.detectChanges();
        return {
            container: containerRect,
            directive: directiveRect
        };
    }
    getFormated(format) {
        return moment(this.value, this.format).format(format);
    }
    isCurrent(value, mode) {
        if (mode == "hour") {
            if (value == moment(this.value, this.format).format("h")) {
                return true;
            }
        }
        else if (mode == "minute") {
            if (value == moment(this.value, this.format).format("m")) {
                return true;
            }
        }
        else if (mode == "ampm") {
            if (value.toLowerCase() == moment(this.value, this.format).format("A").toLowerCase()) {
                return true;
            }
        }
        else if (mode == "date") {
            if (value == moment(this.value, this.format).format("YYYY-MM-DD")) {
                return true;
            }
        }
        else if (mode == "month") {
            if (value.toString().toLowerCase() == moment(this.value, this.format).format("M").toLowerCase()) {
                return true;
            }
        }
        else if (mode == "year") {
            if (value.toString().toLowerCase() == moment(this.value, this.format).format("YYYY").toLowerCase()) {
                return true;
            }
        }
        return false;
    }
    setAmPm(value) {
        var date = moment(this.value, this.format).format("YYYY-MM-DD hh:mm:ss A");
        date = date.replace("AM", value).replace("PM", value);
        this.value = moment(date, "YYYY-MM-DD hh:mm:ss A").format(this.format);
    }
    setDate(value) {
        this.value = moment(this.value, this.format).set("D", value).format(this.format);
    }
    setMonth(value) {
        this.value = moment(this.value, this.format).set("M", value).format(this.format);
    }
    setYear(value) {
        this.value = moment(this.value, this.format).set("year", value).format(this.format);
    }
    setHour(value) {
        this.value = moment(this.value, this.format).set("h", value).format(this.format);
    }
    setMinute(value) {
        this.value = moment(this.value, this.format).set("m", value).format(this.format);
        if (this.config.mode == "time") {
            this.config.timepicker = "";
        }
        else {
            this.config.view = "datepicker";
        }
    }
    apply() {
        this.onApply(this.value);
        this.closeDatePicker();
    }
    openDatePicker(event) {
        document.body.style.overflow = "hidden";
        var inst = this;
        inst.show = true;
        if (inst._value == "") {
            inst._value = moment().format(inst.format);
        }
        var interval = setInterval(function () {
            var rects = inst.setPosition();
            if (rects.container.height > 0) {
                clearInterval(interval);
            }
        });
        inst.cdRef.detectChanges();
    }
    closeDatePicker() {
        var inst = this;
        inst.show = false;
        document.body.style.overflow = "auto";
    }
    ngAfterViewInit() {
        var inst = this;
        inst.element.nativeElement.onfocus = inst.openDatePicker.bind(this);
        inst.element.nativeElement.onclick = inst.openDatePicker.bind(this);
        inst.setPosition();
        if (typeof window !== "undefined") {
            window.onscroll = function () {
                inst.setPosition();
                inst.cdRef.detectChanges();
            };
            window.onresize = function () {
                inst.setPosition();
                inst.cdRef.detectChanges();
            };
        }
    }
    ngOnInit() {
        var inst = this;
    }
}
DatepickerComponent.Éµfac = i0.ÉµÉµngDeclareFactory({ minVersion: "12.0.0", version: "14.1.0", ngImport: i0, type: DatepickerComponent, deps: [{ token: DOCUMENT }, { token: i0.ChangeDetectorRef }], target: i0.ÉµÉµFactoryTarget.Component });
DatepickerComponent.Éµcmp = i0.ÉµÉµngDeclareComponent({ minVersion: "14.0.0", version: "14.1.0", type: DatepickerComponent, selector: "datepicker", inputs: { element: "element", format: "format" }, viewQueries: [{ propertyName: "container", first: true, predicate: ["container"], descendants: true }], ngImport: i0, template: "<div class=\"datepicker-overlay\" (click)=\"closeDatePicker()\" *ngIf=\"show\"></div>\r\n<div #container class=\"datepicker-fixed\" [style.top.px]=\"config.position.y\" [style.left.px]=\"config.position.x\" (click)=\"setPosition()\">\r\n    <div class=\"datepicker-container\" *ngIf=\"show\">\r\n        <div class=\"datepicker-header\">\r\n            <div class=\"datepicker-header-label\">\r\n                <div class=\"datepicker-header-label-date\" *ngIf=\"config.mode == 'date' || config.mode == 'datetime'\">\r\n                    <button (click)=\"config.view='yearpicker'\" class=\"{{config.view == 'yearpicker' ? 'active' : ''}}\" *ngIf=\"config.mode == 'datetime'\">{{getFormated('YYYY')}}</button>\r\n                    <div>\r\n                        <button (click)=\"config.view='monthpicker'\" class=\"{{config.view == 'monthpicker' ? 'active' : ''}}\">{{getFormated('MMM')}}</button>\r\n                        <button (click)=\"config.view='datepicker'\" class=\"{{config.view == 'datepicker' ? 'active' : ''}}\">{{getFormated('DD')}} <span *ngIf=\"config.mode == 'date'\">, </span></button>\r\n                        <button (click)=\"config.view='yearpicker'\" class=\"{{config.view == 'yearpicker' ? 'active' : ''}}\" *ngIf=\"config.mode == 'date'\">{{getFormated('YYYY')}}</button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"datepicker-header-label-date\" *ngIf=\"config.mode == 'month'\">\r\n                    <button class=\"active\">{{getFormated('MMMM')}}</button>\r\n                </div>\r\n                <div class=\"datepicker-header-label-date\" *ngIf=\"config.mode == 'year'\">\r\n                    <button class=\"active\">{{getFormated('YYYY')}}</button>\r\n                </div>\r\n                <div class=\"datepicker-header-label-time\" *ngIf=\"config.mode == 'time' || config.mode == 'datetime'\" [style.paddingTop.px]=\"config.mode == 'datetime' ? 29 : 0\">\r\n                    <button (click)=\"config.view='timepicker';config.timepicker='hour'\" class=\"{{config.view == 'timepicker' && config.timepicker == 'hour' ? 'active' : ''}}\">{{getFormated('hh')}}</button>\r\n                    <span>:</span>\r\n                    <button (click)=\"config.view='timepicker';config.timepicker='minute'\" class=\"{{config.view == 'timepicker' && config.timepicker == 'minute'? 'active' : ''}}\">{{getFormated('mm')}}</button>\r\n                    <div>\r\n                        <button class=\"{{isCurrent('am','ampm') ? 'active' : ''}}\" (click)=\"setAmPm('AM')\">AM</button>\r\n                        <button class=\"{{isCurrent('pm','ampm') ? 'active' : ''}}\" (click)=\"setAmPm('PM')\">PM</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"datepicker-header-action\" *ngIf=\"(config.mode == 'date' || config.mode == 'datetime') && config.view == 'datepicker'\">\r\n                <button (click)=\"setPrevMonth()\"><i class=\"fa fa-arrow-left\"></i></button>\r\n                <div>{{getFormated('MMMM DD')}}</div>\r\n                <button (click)=\"setNextMonth()\"><i class=\"fa fa-arrow-right\"></i></button>\r\n            </div>\r\n            <div class=\"datepicker-header-action\" *ngIf=\"(config.mode == 'date' || config.mode == 'datetime' || config.mode == 'year') && config.view == 'yearpicker'\">\r\n                <button (click)=\"setPrevYearRange()\"><i class=\"fa fa-arrow-left\"></i></button>\r\n                <div>{{config.startYear - 8}} - {{config.startYear + 7}}</div>\r\n                <button (click)=\"setNextYearRange()\"><i class=\"fa fa-arrow-right\"></i></button>\r\n            </div>\r\n        </div>\r\n        <div class=\"datepicker-body\">\r\n            <div class=\"datepicker-datepicker\" *ngIf=\"config.view == 'datepicker' && (config.mode == 'date' || config.mode == 'datetime')\">\r\n                <ul class=\"datepicker-weeks\">\r\n                    <li *ngFor=\"let week of config.weeks\">\r\n                        <span>{{limitChar(week,3)}}</span>\r\n                    </li>\r\n                </ul>\r\n\r\n                <ul class=\"datepicker-dates\">\r\n                    <li *ngFor=\"let d of getPrefixDays()\">\r\n                        <span></span>\r\n                    </li>\r\n                    <li *ngFor=\"let d of getDatesInMonthArray();trackBy:trackBy\" class=\"{{isCurrent(d.formated,'date') ? 'active' : ''}}\" (click)=\"setDate(d.date)\">\r\n                        <span>{{d.date}}</span>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"picker\" *ngIf=\"config.view == 'timepicker'\">\r\n                <span *ngIf=\"config.timepicker == 'hour'\">Select Hour</span>\r\n                <ul class=\"picker-col-3\" *ngIf=\"config.timepicker == 'hour'\">\r\n                    <li *ngFor=\"let n of getArrayOf(12);let h = index\">\r\n                        <button class=\"{{isCurrent(h+1,'hour') ? 'active' : ''}}\" (click)=\"setHour(h+1);config.timepicker = 'minute'\">{{h+1}}</button>\r\n                    </li>\r\n                </ul>\r\n                <span *ngIf=\"config.timepicker == 'minute'\">Select minute</span>\r\n                <ul class=\"picker-col-6\" *ngIf=\"config.timepicker == 'minute'\">\r\n                    <li *ngFor=\"let n of getArrayOf(60);let m = index\">\r\n                        <button class=\"{{isCurrent(m+1,'minute') ? 'active' : ''}}\" (click)=\"setMinute(m+1)\">{{m+1}}</button>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"picker\" *ngIf=\"config.view == 'monthpicker' || config.mode == 'month'\">\r\n                <ul class=\"picker-col-2\">\r\n                    <li *ngFor=\"let month of config.months;let m = index\">\r\n                        <button (click)=\"setMonth(m);config.view = 'datepicker'\" class=\"{{isCurrent(m+1 + '','month') ? 'active' : ''}}\">{{month}}</button>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"picker\" *ngIf=\"config.view == 'yearpicker'  || config.mode == 'year'\">\r\n                <ul class=\"picker-col-4\">\r\n                    <li *ngFor=\"let year of getYearsRange()\">\r\n                        <button class=\"{{isCurrent(year,'year') ? 'active' : ''}}\" (click)=\"setYear(year);config.view = config.mode == 'year' ? 'yearpicker' : 'datepicker'\">{{year}}</button>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class=\"datepicker-footer\">\r\n            <button (click)=\"closeDatePicker()\">Cancel</button>\r\n            <button (click)=\"apply()\">Apply</button>\r\n        </div>\r\n    </div>\r\n</div>", styles: [".datepicker-overlay{position:fixed;z-index:9999;background:rgba(0,0,0,.1215686275);width:100%;height:100%;left:0px;top:0px}.datepicker-fixed{width:100%;max-width:300px;z-index:999999;position:fixed}.datepicker-container{box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background-color:#fff;color:#000000de;width:100%}.datepicker-header-label{background:#3f51b5;color:#fff;display:flex;flex-direction:row;justify-content:center;padding:10px}.datepicker-header-action{display:flex;flex-direction:row;align-items:center}.datepicker-header-action>div{flex:1;display:flex;align-items:center;justify-content:center}.datepicker-header-action>button{border:none;background:transparent;height:40px}.datepicker-footer>button{border:none;background:#fff;border-radius:5px;font-size:15px;padding:5px 20px}.datepicker-footer{padding:10px;display:flex;flex-direction:row;width:100%}.datepicker-footer>button:last-child{box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f;margin-left:auto}ul.datepicker-weeks{list-style:none;padding:10px 0;margin:0;display:flex;flex-direction:row;border-bottom:1px solid #ddd}ul.datepicker-weeks>li{flex:1;display:flex;align-items:center;justify-content:center;font-size:12px}ul.datepicker-dates{padding:0;margin:0;list-style:none;display:block}ul.datepicker-dates>li{width:14.28%;display:inline-block;align-items:center;justify-content:center;font-size:12px;position:relative;padding-top:14.28%;float:left}ul.datepicker-dates>li>span{position:absolute;top:0px;left:0px;display:flex;align-items:center;justify-content:center;width:100%;height:100%;cursor:pointer}ul.datepicker-dates>li>span:hover{background:#ddd}ul.datepicker-dates>li.active>span{background:#3f51b5;color:#fff}.datepicker-header-label-date,.datepicker-header-label-time{display:flex}.datepicker-header-label-date{flex-direction:column}.datepicker-header-label-time{flex-direction:row}.datepicker-header-label button{background:transparent;color:#fff;opacity:.5;transition:.5s all ease;border:none}.datepicker-header-label button.active{opacity:1}.datepicker-header-label button:hover{opacity:.8}.datepicker-header-label-date>button{width:100%;text-align:left}.datepicker-header-label-date>button{font-size:18px}.datepicker-header-label-date>div{width:100%;display:flex;flex-direction:row}.datepicker-header-label-date>div>button{font-size:35px;line-height:30px}.datepicker-header-label-time>button{font-size:35px;line-height:30px}.datepicker-header-label-time>span{font-size:30px;line-height:0px;width:5px;justify-content:center;align-items:center;height:100%;display:flex}.datepicker-header-label-time>div{display:flex;flex-direction:column;align-items:center;justify-content:center}.datepicker-header-label-time>div>button{font-size:15px;line-height:15px}.picker>span{font-size:14px;display:block;width:100%;padding:5px}.picker>ul{list-style:none;padding:0;margin:0;display:flex;flex-direction:row;flex-wrap:wrap;max-height:250px;overflow:auto}ul.picker-col-2>li{width:50%}ul.picker-col-3>li{width:33.33%}ul.picker-col-4>li{width:25%}ul.picker-col-6>li{width:16.66%}.picker>ul>li{padding:5px}.picker>ul>li>button{width:100%;border:none;padding:5px;font-size:12px;border-radius:5px;background:rgba(0,0,0,.0392156863)}.picker>ul>li>button:hover{background:#ddd}.picker>ul>li>button.active{background:#3f51b5;color:#fff}\n"], dependencies: [{ kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }] });
i0.ÉµÉµngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.1.0", ngImport: i0, type: DatepickerComponent, decorators: [{
            type: Component,
            args: [{ selector: 'datepicker', template: "<div class=\"datepicker-overlay\" (click)=\"closeDatePicker()\" *ngIf=\"show\"></div>\r\n<div #container class=\"datepicker-fixed\" [style.top.px]=\"config.position.y\" [style.left.px]=\"config.position.x\" (click)=\"setPosition()\">\r\n    <div class=\"datepicker-container\" *ngIf=\"show\">\r\n        <div class=\"datepicker-header\">\r\n            <div class=\"datepicker-header-label\">\r\n                <div class=\"datepicker-header-label-date\" *ngIf=\"config.mode == 'date' || config.mode == 'datetime'\">\r\n                    <button (click)=\"config.view='yearpicker'\" class=\"{{config.view == 'yearpicker' ? 'active' : ''}}\" *ngIf=\"config.mode == 'datetime'\">{{getFormated('YYYY')}}</button>\r\n                    <div>\r\n                        <button (click)=\"config.view='monthpicker'\" class=\"{{config.view == 'monthpicker' ? 'active' : ''}}\">{{getFormated('MMM')}}</button>\r\n                        <button (click)=\"config.view='datepicker'\" class=\"{{config.view == 'datepicker' ? 'active' : ''}}\">{{getFormated('DD')}} <span *ngIf=\"config.mode == 'date'\">, </span></button>\r\n                        <button (click)=\"config.view='yearpicker'\" class=\"{{config.view == 'yearpicker' ? 'active' : ''}}\" *ngIf=\"config.mode == 'date'\">{{getFormated('YYYY')}}</button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"datepicker-header-label-date\" *ngIf=\"config.mode == 'month'\">\r\n                    <button class=\"active\">{{getFormated('MMMM')}}</button>\r\n                </div>\r\n                <div class=\"datepicker-header-label-date\" *ngIf=\"config.mode == 'year'\">\r\n                    <button class=\"active\">{{getFormated('YYYY')}}</button>\r\n                </div>\r\n                <div class=\"datepicker-header-label-time\" *ngIf=\"config.mode == 'time' || config.mode == 'datetime'\" [style.paddingTop.px]=\"config.mode == 'datetime' ? 29 : 0\">\r\n                    <button (click)=\"config.view='timepicker';config.timepicker='hour'\" class=\"{{config.view == 'timepicker' && config.timepicker == 'hour' ? 'active' : ''}}\">{{getFormated('hh')}}</button>\r\n                    <span>:</span>\r\n                    <button (click)=\"config.view='timepicker';config.timepicker='minute'\" class=\"{{config.view == 'timepicker' && config.timepicker == 'minute'? 'active' : ''}}\">{{getFormated('mm')}}</button>\r\n                    <div>\r\n                        <button class=\"{{isCurrent('am','ampm') ? 'active' : ''}}\" (click)=\"setAmPm('AM')\">AM</button>\r\n                        <button class=\"{{isCurrent('pm','ampm') ? 'active' : ''}}\" (click)=\"setAmPm('PM')\">PM</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"datepicker-header-action\" *ngIf=\"(config.mode == 'date' || config.mode == 'datetime') && config.view == 'datepicker'\">\r\n                <button (click)=\"setPrevMonth()\"><i class=\"fa fa-arrow-left\"></i></button>\r\n                <div>{{getFormated('MMMM DD')}}</div>\r\n                <button (click)=\"setNextMonth()\"><i class=\"fa fa-arrow-right\"></i></button>\r\n            </div>\r\n            <div class=\"datepicker-header-action\" *ngIf=\"(config.mode == 'date' || config.mode == 'datetime' || config.mode == 'year') && config.view == 'yearpicker'\">\r\n                <button (click)=\"setPrevYearRange()\"><i class=\"fa fa-arrow-left\"></i></button>\r\n                <div>{{config.startYear - 8}} - {{config.startYear + 7}}</div>\r\n                <button (click)=\"setNextYearRange()\"><i class=\"fa fa-arrow-right\"></i></button>\r\n            </div>\r\n        </div>\r\n        <div class=\"datepicker-body\">\r\n            <div class=\"datepicker-datepicker\" *ngIf=\"config.view == 'datepicker' && (config.mode == 'date' || config.mode == 'datetime')\">\r\n                <ul class=\"datepicker-weeks\">\r\n                    <li *ngFor=\"let week of config.weeks\">\r\n                        <span>{{limitChar(week,3)}}</span>\r\n                    </li>\r\n                </ul>\r\n\r\n                <ul class=\"datepicker-dates\">\r\n                    <li *ngFor=\"let d of getPrefixDays()\">\r\n                        <span></span>\r\n                    </li>\r\n                    <li *ngFor=\"let d of getDatesInMonthArray();trackBy:trackBy\" class=\"{{isCurrent(d.formated,'date') ? 'active' : ''}}\" (click)=\"setDate(d.date)\">\r\n                        <span>{{d.date}}</span>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"picker\" *ngIf=\"config.view == 'timepicker'\">\r\n                <span *ngIf=\"config.timepicker == 'hour'\">Select Hour</span>\r\n                <ul class=\"picker-col-3\" *ngIf=\"config.timepicker == 'hour'\">\r\n                    <li *ngFor=\"let n of getArrayOf(12);let h = index\">\r\n                        <button class=\"{{isCurrent(h+1,'hour') ? 'active' : ''}}\" (click)=\"setHour(h+1);config.timepicker = 'minute'\">{{h+1}}</button>\r\n                    </li>\r\n                </ul>\r\n                <span *ngIf=\"config.timepicker == 'minute'\">Select minute</span>\r\n                <ul class=\"picker-col-6\" *ngIf=\"config.timepicker == 'minute'\">\r\n                    <li *ngFor=\"let n of getArrayOf(60);let m = index\">\r\n                        <button class=\"{{isCurrent(m+1,'minute') ? 'active' : ''}}\" (click)=\"setMinute(m+1)\">{{m+1}}</button>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"picker\" *ngIf=\"config.view == 'monthpicker' || config.mode == 'month'\">\r\n                <ul class=\"picker-col-2\">\r\n                    <li *ngFor=\"let month of config.months;let m = index\">\r\n                        <button (click)=\"setMonth(m);config.view = 'datepicker'\" class=\"{{isCurrent(m+1 + '','month') ? 'active' : ''}}\">{{month}}</button>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"picker\" *ngIf=\"config.view == 'yearpicker'  || config.mode == 'year'\">\r\n                <ul class=\"picker-col-4\">\r\n                    <li *ngFor=\"let year of getYearsRange()\">\r\n                        <button class=\"{{isCurrent(year,'year') ? 'active' : ''}}\" (click)=\"setYear(year);config.view = config.mode == 'year' ? 'yearpicker' : 'datepicker'\">{{year}}</button>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class=\"datepicker-footer\">\r\n            <button (click)=\"closeDatePicker()\">Cancel</button>\r\n            <button (click)=\"apply()\">Apply</button>\r\n        </div>\r\n    </div>\r\n</div>", styles: [".datepicker-overlay{position:fixed;z-index:9999;background:rgba(0,0,0,.1215686275);width:100%;height:100%;left:0px;top:0px}.datepicker-fixed{width:100%;max-width:300px;z-index:999999;position:fixed}.datepicker-container{box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background-color:#fff;color:#000000de;width:100%}.datepicker-header-label{background:#3f51b5;color:#fff;display:flex;flex-direction:row;justify-content:center;padding:10px}.datepicker-header-action{display:flex;flex-direction:row;align-items:center}.datepicker-header-action>div{flex:1;display:flex;align-items:center;justify-content:center}.datepicker-header-action>button{border:none;background:transparent;height:40px}.datepicker-footer>button{border:none;background:#fff;border-radius:5px;font-size:15px;padding:5px 20px}.datepicker-footer{padding:10px;display:flex;flex-direction:row;width:100%}.datepicker-footer>button:last-child{box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f;margin-left:auto}ul.datepicker-weeks{list-style:none;padding:10px 0;margin:0;display:flex;flex-direction:row;border-bottom:1px solid #ddd}ul.datepicker-weeks>li{flex:1;display:flex;align-items:center;justify-content:center;font-size:12px}ul.datepicker-dates{padding:0;margin:0;list-style:none;display:block}ul.datepicker-dates>li{width:14.28%;display:inline-block;align-items:center;justify-content:center;font-size:12px;position:relative;padding-top:14.28%;float:left}ul.datepicker-dates>li>span{position:absolute;top:0px;left:0px;display:flex;align-items:center;justify-content:center;width:100%;height:100%;cursor:pointer}ul.datepicker-dates>li>span:hover{background:#ddd}ul.datepicker-dates>li.active>span{background:#3f51b5;color:#fff}.datepicker-header-label-date,.datepicker-header-label-time{display:flex}.datepicker-header-label-date{flex-direction:column}.datepicker-header-label-time{flex-direction:row}.datepicker-header-label button{background:transparent;color:#fff;opacity:.5;transition:.5s all ease;border:none}.datepicker-header-label button.active{opacity:1}.datepicker-header-label button:hover{opacity:.8}.datepicker-header-label-date>button{width:100%;text-align:left}.datepicker-header-label-date>button{font-size:18px}.datepicker-header-label-date>div{width:100%;display:flex;flex-direction:row}.datepicker-header-label-date>div>button{font-size:35px;line-height:30px}.datepicker-header-label-time>button{font-size:35px;line-height:30px}.datepicker-header-label-time>span{font-size:30px;line-height:0px;width:5px;justify-content:center;align-items:center;height:100%;display:flex}.datepicker-header-label-time>div{display:flex;flex-direction:column;align-items:center;justify-content:center}.datepicker-header-label-time>div>button{font-size:15px;line-height:15px}.picker>span{font-size:14px;display:block;width:100%;padding:5px}.picker>ul{list-style:none;padding:0;margin:0;display:flex;flex-direction:row;flex-wrap:wrap;max-height:250px;overflow:auto}ul.picker-col-2>li{width:50%}ul.picker-col-3>li{width:33.33%}ul.picker-col-4>li{width:25%}ul.picker-col-6>li{width:16.66%}.picker>ul>li{padding:5px}.picker>ul>li>button{width:100%;border:none;padding:5px;font-size:12px;border-radius:5px;background:rgba(0,0,0,.0392156863)}.picker>ul>li>button:hover{background:#ddd}.picker>ul>li>button.active{background:#3f51b5;color:#fff}\n"] }]
        }], ctorParameters: function () { return [{ type: Document, decorators: [{
                    type: Inject,
                    args: [DOCUMENT]
                }] }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { container: [{
                type: ViewChild,
                args: ["container"]
            }], element: [{
                type: Input,
                args: ["element"]
            }], format: [{
                type: Input,
                args: ["format"]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZXBpY2tlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtZGF0ZXBpY2tlci9zcmMvbGliL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtZGF0ZXBpY2tlci9zcmMvbGliL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQW9DLFNBQVMsRUFBYyxNQUFNLEVBQUUsS0FBSyxFQUFVLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMxSCxPQUFPLE1BQU0sTUFBTSxRQUFRLENBQUM7QUFFNUIsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGlCQUFpQixDQUFDOzs7QUFPM0MsTUFBTSxPQUFPLG1CQUFtQjtJQUU5QixZQUM0QixRQUFrQixFQUNwQyxLQUF3QjtRQUROLGFBQVEsR0FBUixRQUFRLENBQVU7UUFDcEMsVUFBSyxHQUFMLEtBQUssQ0FBbUI7UUFJbEMsU0FBSSxHQUFZLEtBQUssQ0FBQztRQUdMLFdBQU0sR0FBVyxxQkFBcUIsQ0FBQztRQUd4RCxXQUFNLEdBQUc7WUFDUCxJQUFJLEVBQUUsVUFBVTtZQUNoQixJQUFJLEVBQUUsWUFBWTtZQUNsQixVQUFVLEVBQUUsRUFBRTtZQUNkLFFBQVEsRUFBRTtnQkFDUixDQUFDLEVBQUUsQ0FBQztnQkFDSixDQUFDLEVBQUUsQ0FBQzthQUNMO1lBQ0QsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFO1lBQ25DLEtBQUssRUFBRTtnQkFDTCxJQUFJLEVBQUUsSUFBSTtnQkFDVixLQUFLLEVBQUUsSUFBSTtnQkFDWCxFQUFFLEVBQUUsSUFBSTtnQkFDUixJQUFJLEVBQUUsSUFBSTthQUNYO1lBQ0QsS0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDO1lBQ3JGLE1BQU0sRUFBRSxDQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsVUFBVSxDQUFDO1NBQ25JLENBQUM7UUFFRixXQUFNLEdBQVcsRUFBRSxDQUFDO1FBZ0JwQixZQUFPLEdBQVEsQ0FBQyxFQUFVLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQTtJQTVDOUIsQ0FBQztJQThCTCxJQUFJLEtBQUs7UUFDUCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQztJQUVELElBQUksS0FBSyxDQUFDLEtBQWE7UUFDckIsSUFBSSxLQUFLLEtBQUssRUFBRSxJQUFJLEtBQUssS0FBSyxJQUFJLElBQUksT0FBTyxLQUFLLEtBQUssV0FBVyxFQUFFO1lBQ2xFLElBQUksTUFBTSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUU7Z0JBQ3hDLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO2FBQ3JCO2lCQUFNO2dCQUNMLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUM7YUFDN0I7U0FDRjtJQUNILENBQUM7SUFLRCxPQUFPLENBQUMsQ0FBUztRQUNmLE9BQU8sQ0FBQyxDQUFDO0lBQ1gsQ0FBQztJQUVELGFBQWE7UUFDWCxJQUFJLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzVELElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkMsT0FBTyxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN4QixDQUFDO0lBRUQsb0JBQW9CO1FBQ2xCLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNmLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQzlFLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRTVFLEtBQUssSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsRUFBRTtZQUNoRSxLQUFLLENBQUMsSUFBSSxDQUFDO2dCQUNULElBQUksRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQztnQkFDbkIsUUFBUSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDO2FBQ2pDLENBQUMsQ0FBQztTQUNKO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBRUQsY0FBYztRQUNaLE9BQU8sSUFBSSxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBTUQsVUFBVSxDQUFDLENBQVM7UUFDbEIsT0FBTyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN0QixDQUFDO0lBRUQsU0FBUyxDQUFDLEdBQVc7UUFDbkIsT0FBTyxHQUFHLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO0lBQ3BFLENBQUM7SUFFRCxVQUFVLENBQUMsQ0FBUztRQUNsQixPQUFPLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxTQUFTLENBQUMsR0FBVyxFQUFFLENBQVM7UUFDOUIsT0FBTyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBRUQsZ0JBQWdCO1FBQ2QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQ3JELENBQUM7SUFFRCxnQkFBZ0I7UUFDZCxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7SUFDckQsQ0FBQztJQUdELFlBQVk7UUFDVixJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDL0UsQ0FBQztJQUVELFlBQVk7UUFDVixJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNoRixDQUFDO0lBRUQsYUFBYTtRQUNYLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNmLElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQztRQUMxQyxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7UUFDeEMsS0FBSyxJQUFJLENBQUMsR0FBRyxTQUFTLEVBQUUsQ0FBQyxJQUFJLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN6QyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2Y7UUFDRCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFJRCxXQUFXO1FBQ1QsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLElBQUksYUFBYSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFDdkUsSUFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUd6RSxJQUFJLE1BQU0sQ0FBQyxVQUFVLElBQUksR0FBRyxJQUFJLE1BQU0sQ0FBQyxXQUFXLElBQUksR0FBRyxFQUFFO1lBQ3pELElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEdBQUcsYUFBYSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN2RSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsV0FBVyxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDekUsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUMzQixPQUFPO2dCQUNMLFNBQVMsRUFBRSxhQUFhO2dCQUN4QixTQUFTLEVBQUUsYUFBYTthQUN6QixDQUFDO1NBQ0g7UUFHRCxJQUFJLE1BQU0sQ0FBQyxXQUFXLElBQUksYUFBYSxDQUFDLE1BQU0sR0FBRyxhQUFhLENBQUMsTUFBTSxHQUFHLGFBQWEsQ0FBQyxDQUFDLEVBQUU7WUFDdkYsNENBQTRDO1lBQzVDLHFIQUFxSDtZQUVySCxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDdkUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxhQUFhLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBRTFFO2FBQU0sSUFBSSxNQUFNLENBQUMsVUFBVSxJQUFJLGFBQWEsQ0FBQyxLQUFLLEdBQUcsYUFBYSxDQUFDLEtBQUssR0FBRyxhQUFhLENBQUMsQ0FBQyxFQUFFO1lBQzNGLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUM7WUFDaEUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUMsR0FBRyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDMUY7YUFBTTtZQUNMLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDO1lBQ3pDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUM7U0FDakU7UUFFRCxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQzNCLE9BQU87WUFDTCxTQUFTLEVBQUUsYUFBYTtZQUN4QixTQUFTLEVBQUUsYUFBYTtTQUN6QixDQUFDO0lBQ0osQ0FBQztJQUlELFdBQVcsQ0FBQyxNQUFjO1FBQ3hCLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN4RCxDQUFDO0lBRUQsU0FBUyxDQUFDLEtBQVUsRUFBRSxJQUFZO1FBRWhDLElBQUksSUFBSSxJQUFJLE1BQU0sRUFBRTtZQUNsQixJQUFJLEtBQUssSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUN4RCxPQUFPLElBQUksQ0FBQzthQUNiO1NBQ0Y7YUFBTSxJQUFJLElBQUksSUFBSSxRQUFRLEVBQUU7WUFDM0IsSUFBSSxLQUFLLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDeEQsT0FBTyxJQUFJLENBQUM7YUFDYjtTQUNGO2FBQU0sSUFBSSxJQUFJLElBQUksTUFBTSxFQUFFO1lBQ3pCLElBQUksS0FBSyxDQUFDLFdBQVcsRUFBRSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFLEVBQUU7Z0JBQ3BGLE9BQU8sSUFBSSxDQUFDO2FBQ2I7U0FDRjthQUFNLElBQUksSUFBSSxJQUFJLE1BQU0sRUFBRTtZQUN6QixJQUFJLEtBQUssSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO2dCQUNqRSxPQUFPLElBQUksQ0FBQzthQUNiO1NBQ0Y7YUFBTSxJQUFJLElBQUksSUFBSSxPQUFPLEVBQUU7WUFDMUIsSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxFQUFFLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUUsRUFBRTtnQkFDL0YsT0FBTyxJQUFJLENBQUM7YUFDYjtTQUNGO2FBQU0sSUFBSSxJQUFJLElBQUksTUFBTSxFQUFFO1lBQ3pCLElBQUksS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsRUFBRSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLEVBQUU7Z0JBQ2xHLE9BQU8sSUFBSSxDQUFDO2FBQ2I7U0FDRjtRQUVELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUdELE9BQU8sQ0FBQyxLQUFhO1FBQ25CLElBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUMzRSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxJQUFJLEVBQUUsdUJBQXVCLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3pFLENBQUM7SUFHRCxPQUFPLENBQUMsS0FBVTtRQUNoQixJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbkYsQ0FBQztJQUVELFFBQVEsQ0FBQyxLQUFhO1FBQ3BCLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNuRixDQUFDO0lBRUQsT0FBTyxDQUFDLEtBQWE7UUFDbkIsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3RGLENBQUM7SUFFRCxPQUFPLENBQUMsS0FBYTtRQUNuQixJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbkYsQ0FBQztJQUVELFNBQVMsQ0FBQyxLQUFhO1FBQ3JCLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNqRixJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLE1BQU0sRUFBRTtZQUM5QixJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7U0FDN0I7YUFBTTtZQUNMLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLFlBQVksQ0FBQztTQUNqQztJQUNILENBQUM7SUFHRCxLQUFLO1FBQ0gsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFJRCxjQUFjLENBQUMsS0FBVTtRQUN2QixRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQ3hDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksRUFBRSxFQUFFO1lBQ3JCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUM1QztRQUNELElBQUksUUFBUSxHQUFHLFdBQVcsQ0FBQztZQUN6QixJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDL0IsSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQzlCLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUN6QjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUM3QixDQUFDO0lBR0QsZUFBZTtRQUNiLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztRQUNsQixRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDO0lBQ3hDLENBQUM7SUFFRCxlQUFlO1FBQ2IsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNwRSxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDcEUsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBRW5CLElBQUksT0FBTyxNQUFNLEtBQUssV0FBVyxFQUFFO1lBQ2pDLE1BQU0sQ0FBQyxRQUFRLEdBQUc7Z0JBQ2hCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDbkIsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUM3QixDQUFDLENBQUM7WUFFRixNQUFNLENBQUMsUUFBUSxHQUFHO2dCQUNoQixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQ25CLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDN0IsQ0FBQyxDQUFDO1NBRUg7SUFHSCxDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztJQUNsQixDQUFDOztnSEFyU1UsbUJBQW1CLGtCQUdwQixRQUFRO29HQUhQLG1CQUFtQiw0TUNWaEMsdXBOQTJGTTsyRkRqRk8sbUJBQW1CO2tCQUwvQixTQUFTOytCQUNFLFlBQVk7MERBT2dCLFFBQVE7MEJBQTNDLE1BQU07MkJBQUMsUUFBUTs0RUFNTSxTQUFTO3NCQUFoQyxTQUFTO3VCQUFDLFdBQVc7Z0JBQ0osT0FBTztzQkFBeEIsS0FBSzt1QkFBQyxTQUFTO2dCQUNDLE1BQU07c0JBQXRCLEtBQUs7dUJBQUMsUUFBUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFmdGVyVmlld0luaXQsIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIEVsZW1lbnRSZWYsIEluamVjdCwgSW5wdXQsIE9uSW5pdCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuXHJcbmltcG9ydCB7IERPQ1VNRU5UIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnZGF0ZXBpY2tlcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2RhdGVwaWNrZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2RhdGVwaWNrZXIuY29tcG9uZW50LnNjc3MnXSxcclxufSlcclxuZXhwb3J0IGNsYXNzIERhdGVwaWNrZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgZG9jdW1lbnQ6IERvY3VtZW50LFxyXG4gICAgcHJpdmF0ZSBjZFJlZjogQ2hhbmdlRGV0ZWN0b3JSZWZcclxuICApIHsgfVxyXG5cclxuXHJcbiAgc2hvdzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBWaWV3Q2hpbGQoXCJjb250YWluZXJcIikgY29udGFpbmVyICE6IEVsZW1lbnRSZWY7XHJcbiAgQElucHV0KFwiZWxlbWVudFwiKSBlbGVtZW50ICE6IEVsZW1lbnRSZWY7XHJcbiAgQElucHV0KFwiZm9ybWF0XCIpIGZvcm1hdDogc3RyaW5nID0gXCJZWVlZLU1NLUREIEhIOm1tOnNzXCI7XHJcblxyXG5cclxuICBjb25maWcgPSB7XHJcbiAgICBtb2RlOiBcImRhdGV0aW1lXCIsLy90aW1lLCBkYXRldGltZSxkYXRlXHJcbiAgICB2aWV3OiBcImRhdGVwaWNrZXJcIiwgLy9kYXRlcGlja2VyLCB0aW1lcGlja2VyLCBtb250aHBpY2tlcix5ZWFycGlja2VyXHJcbiAgICB0aW1lcGlja2VyOiAnJywgLy9ob3VyICwgbWludXRlXHJcbiAgICBwb3NpdGlvbjoge1xyXG4gICAgICB4OiAwLFxyXG4gICAgICB5OiAwXHJcbiAgICB9LFxyXG4gICAgc3RhcnRZZWFyOiBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksXHJcbiAgICBpY29uczoge1xyXG4gICAgICBsZWZ0OiBcIvCfobBcIixcclxuICAgICAgcmlnaHQ6IFwi8J+hslwiLFxyXG4gICAgICB1cDogXCLwn6GxXCIsXHJcbiAgICAgIGRvd246IFwi8J+hs1wiXHJcbiAgICB9LFxyXG4gICAgd2Vla3M6IFtcIlN1bmRheVwiLCBcIk1vbmRheVwiLCBcIlR1ZXNkYXlcIiwgXCJXZWRuZXNkYXlcIiwgXCJUaGlyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCJdLFxyXG4gICAgbW9udGhzOiBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09jdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInXSxcclxuICB9O1xyXG5cclxuICBfdmFsdWU6IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gIGdldCB2YWx1ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcclxuICB9XHJcblxyXG4gIHNldCB2YWx1ZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICBpZiAodmFsdWUgIT09IFwiXCIgJiYgdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgIGlmIChtb21lbnQodmFsdWUsIHRoaXMuZm9ybWF0KS5pc1ZhbGlkKCkpIHtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiSW52YWxpZCBkYXRlXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkFwcGx5OiBhbnkgPSAoX3Y6IHN0cmluZykgPT4geyB9XHJcblxyXG5cclxuICB0cmFja0J5KG46IG51bWJlcikge1xyXG4gICAgcmV0dXJuIG47XHJcbiAgfVxyXG5cclxuICBnZXRQcmVmaXhEYXlzKCkge1xyXG4gICAgdmFyIGRhdGUgPSBtb21lbnQodGhpcy52YWx1ZSwgdGhpcy5mb3JtYXQpLnN0YXJ0T2YoJ21vbnRoJyk7XHJcbiAgICB2YXIgZGF5ID0gTnVtYmVyKGRhdGUuZm9ybWF0KFwiZFwiKSk7XHJcbiAgICByZXR1cm4gbmV3IEFycmF5KGRheSk7XHJcbiAgfVxyXG5cclxuICBnZXREYXRlc0luTW9udGhBcnJheSgpIHtcclxuICAgIHZhciBkYXRlcyA9IFtdO1xyXG4gICAgdmFyIGEgPSBtb21lbnQodGhpcy52YWx1ZSwgdGhpcy5mb3JtYXQpLnN0YXJ0T2YoJ21vbnRoJykuZm9ybWF0KCdZWVlZLU1NLUREJyk7XHJcbiAgICB2YXIgYiA9IG1vbWVudCh0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdCkuZW5kT2YoJ21vbnRoJykuZm9ybWF0KCdZWVlZLU1NLUREJyk7XHJcblxyXG4gICAgZm9yICh2YXIgbSA9IG1vbWVudChhKTsgbS5kaWZmKGIsICdkYXlzJykgPD0gMDsgbS5hZGQoMSwgJ2RheXMnKSkge1xyXG4gICAgICBkYXRlcy5wdXNoKHtcclxuICAgICAgICBkYXRlOiBtLmZvcm1hdCgnRCcpLFxyXG4gICAgICAgIGZvcm1hdGVkOiBtLmZvcm1hdChcIllZWVktTU0tRERcIilcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0ZXM7XHJcbiAgfVxyXG5cclxuICBnZXREYXlzSW5Nb250aCgpIHtcclxuICAgIHJldHVybiBuZXcgQXJyYXkobW9tZW50KCkuZGF5c0luTW9udGgoKSk7XHJcbiAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgZ2V0QXJyYXlPZihuOiBudW1iZXIpIHtcclxuICAgIHJldHVybiBuZXcgQXJyYXkobik7XHJcbiAgfVxyXG5cclxuICB0aXRsZUNhc2Uoc3RyOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXGIoXFx3KS9nLCBzID0+IHMudG9VcHBlckNhc2UoKSk7XHJcbiAgfVxyXG5cclxuICBwcmVmaXhaZXJvKG46IG51bWJlcikge1xyXG4gICAgcmV0dXJuICgnMCcgKyBuKS5zbGljZSgtMik7XHJcbiAgfVxyXG5cclxuICBsaW1pdENoYXIoc3RyOiBzdHJpbmcsIG46IG51bWJlcikge1xyXG4gICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgbik7XHJcbiAgfVxyXG5cclxuICBzZXROZXh0WWVhclJhbmdlKCkge1xyXG4gICAgdGhpcy5jb25maWcuc3RhcnRZZWFyID0gdGhpcy5jb25maWcuc3RhcnRZZWFyICsgMTU7XHJcbiAgfVxyXG5cclxuICBzZXRQcmV2WWVhclJhbmdlKCkge1xyXG4gICAgdGhpcy5jb25maWcuc3RhcnRZZWFyID0gdGhpcy5jb25maWcuc3RhcnRZZWFyIC0gMTQ7XHJcbiAgfVxyXG5cclxuXHJcbiAgc2V0TmV4dE1vbnRoKCkge1xyXG4gICAgdGhpcy52YWx1ZSA9IG1vbWVudCh0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdCkuYWRkKDEsIFwiTVwiKS5mb3JtYXQodGhpcy5mb3JtYXQpO1xyXG4gIH1cclxuXHJcbiAgc2V0UHJldk1vbnRoKCkge1xyXG4gICAgdGhpcy52YWx1ZSA9IG1vbWVudCh0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdCkuYWRkKC0xLCBcIk1cIikuZm9ybWF0KHRoaXMuZm9ybWF0KTtcclxuICB9XHJcblxyXG4gIGdldFllYXJzUmFuZ2UoKSB7XHJcbiAgICB2YXIgeWVhcnMgPSBbXTtcclxuICAgIHZhciBzdGFydFllYXIgPSB0aGlzLmNvbmZpZy5zdGFydFllYXIgLSA4O1xyXG4gICAgdmFyIGVuZFllYXIgPSB0aGlzLmNvbmZpZy5zdGFydFllYXIgKyA3O1xyXG4gICAgZm9yICh2YXIgeSA9IHN0YXJ0WWVhcjsgeSA8PSBlbmRZZWFyOyB5KyspIHtcclxuICAgICAgeWVhcnMucHVzaCh5KTtcclxuICAgIH1cclxuICAgIHJldHVybiB5ZWFycztcclxuICB9XHJcblxyXG5cclxuXHJcbiAgc2V0UG9zaXRpb24oKSB7XHJcbiAgICB2YXIgaW5zdCA9IHRoaXM7XHJcbiAgICB2YXIgZGlyZWN0aXZlUmVjdCA9IGluc3QuZWxlbWVudC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgdmFyIGNvbnRhaW5lclJlY3QgPSBpbnN0LmNvbnRhaW5lci5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuXHJcbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPD0gNjAwIHx8IHdpbmRvdy5pbm5lckhlaWdodCA8PSA2MDApIHtcclxuICAgICAgaW5zdC5jb25maWcucG9zaXRpb24ueCA9ICh3aW5kb3cuaW5uZXJXaWR0aCAtIGNvbnRhaW5lclJlY3Qud2lkdGgpIC8gMjtcclxuICAgICAgaW5zdC5jb25maWcucG9zaXRpb24ueSA9ICh3aW5kb3cuaW5uZXJIZWlnaHQgLSBjb250YWluZXJSZWN0LmhlaWdodCkgLyAyO1xyXG4gICAgICBpbnN0LmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lclJlY3QsXHJcbiAgICAgICAgZGlyZWN0aXZlOiBkaXJlY3RpdmVSZWN0XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPD0gZGlyZWN0aXZlUmVjdC5oZWlnaHQgKyBjb250YWluZXJSZWN0LmhlaWdodCArIGRpcmVjdGl2ZVJlY3QueSkge1xyXG4gICAgICAvLyBpbnN0LmNvbmZpZy5wb3NpdGlvbi54ID0gZGlyZWN0aXZlUmVjdC54O1xyXG4gICAgICAvLyBpbnN0LmNvbmZpZy5wb3NpdGlvbi55ID0gKChkaXJlY3RpdmVSZWN0LnkgLSBjb250YWluZXJSZWN0LmhlaWdodCkgKyBkaXJlY3RpdmVSZWN0LmhlaWdodCkgLSBkaXJlY3RpdmVSZWN0LmhlaWdodDtcclxuXHJcbiAgICAgIGluc3QuY29uZmlnLnBvc2l0aW9uLnggPSAod2luZG93LmlubmVyV2lkdGggLSBjb250YWluZXJSZWN0LndpZHRoKSAvIDI7XHJcbiAgICAgIGluc3QuY29uZmlnLnBvc2l0aW9uLnkgPSAod2luZG93LmlubmVySGVpZ2h0IC0gY29udGFpbmVyUmVjdC5oZWlnaHQpIC8gMjtcclxuXHJcbiAgICB9IGVsc2UgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IGRpcmVjdGl2ZVJlY3Qud2lkdGggKyBjb250YWluZXJSZWN0LndpZHRoICsgZGlyZWN0aXZlUmVjdC54KSB7XHJcbiAgICAgIGluc3QuY29uZmlnLnBvc2l0aW9uLnkgPSBkaXJlY3RpdmVSZWN0LnkgKyBkaXJlY3RpdmVSZWN0LmhlaWdodDtcclxuICAgICAgaW5zdC5jb25maWcucG9zaXRpb24ueCA9ICgoZGlyZWN0aXZlUmVjdC54IC0gY29udGFpbmVyUmVjdC53aWR0aCkgKyBkaXJlY3RpdmVSZWN0LndpZHRoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGluc3QuY29uZmlnLnBvc2l0aW9uLnggPSBkaXJlY3RpdmVSZWN0Lng7XHJcbiAgICAgIGluc3QuY29uZmlnLnBvc2l0aW9uLnkgPSBkaXJlY3RpdmVSZWN0LnkgKyBkaXJlY3RpdmVSZWN0LmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBpbnN0LmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyUmVjdCxcclxuICAgICAgZGlyZWN0aXZlOiBkaXJlY3RpdmVSZWN0XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcblxyXG5cclxuICBnZXRGb3JtYXRlZChmb3JtYXQ6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIG1vbWVudCh0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdCkuZm9ybWF0KGZvcm1hdCk7XHJcbiAgfVxyXG5cclxuICBpc0N1cnJlbnQodmFsdWU6IGFueSwgbW9kZTogc3RyaW5nKSB7XHJcblxyXG4gICAgaWYgKG1vZGUgPT0gXCJob3VyXCIpIHtcclxuICAgICAgaWYgKHZhbHVlID09IG1vbWVudCh0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdCkuZm9ybWF0KFwiaFwiKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT0gXCJtaW51dGVcIikge1xyXG4gICAgICBpZiAodmFsdWUgPT0gbW9tZW50KHRoaXMudmFsdWUsIHRoaXMuZm9ybWF0KS5mb3JtYXQoXCJtXCIpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAobW9kZSA9PSBcImFtcG1cIikge1xyXG4gICAgICBpZiAodmFsdWUudG9Mb3dlckNhc2UoKSA9PSBtb21lbnQodGhpcy52YWx1ZSwgdGhpcy5mb3JtYXQpLmZvcm1hdChcIkFcIikudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT0gXCJkYXRlXCIpIHtcclxuICAgICAgaWYgKHZhbHVlID09IG1vbWVudCh0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdCkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT0gXCJtb250aFwiKSB7XHJcbiAgICAgIGlmICh2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgPT0gbW9tZW50KHRoaXMudmFsdWUsIHRoaXMuZm9ybWF0KS5mb3JtYXQoXCJNXCIpLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChtb2RlID09IFwieWVhclwiKSB7XHJcbiAgICAgIGlmICh2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgPT0gbW9tZW50KHRoaXMudmFsdWUsIHRoaXMuZm9ybWF0KS5mb3JtYXQoXCJZWVlZXCIpLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG5cclxuICBzZXRBbVBtKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIHZhciBkYXRlID0gbW9tZW50KHRoaXMudmFsdWUsIHRoaXMuZm9ybWF0KS5mb3JtYXQoXCJZWVlZLU1NLUREIGhoOm1tOnNzIEFcIik7XHJcbiAgICBkYXRlID0gZGF0ZS5yZXBsYWNlKFwiQU1cIiwgdmFsdWUpLnJlcGxhY2UoXCJQTVwiLCB2YWx1ZSk7XHJcbiAgICB0aGlzLnZhbHVlID0gbW9tZW50KGRhdGUsIFwiWVlZWS1NTS1ERCBoaDptbTpzcyBBXCIpLmZvcm1hdCh0aGlzLmZvcm1hdCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgc2V0RGF0ZSh2YWx1ZTogYW55KSB7XHJcbiAgICB0aGlzLnZhbHVlID0gbW9tZW50KHRoaXMudmFsdWUsIHRoaXMuZm9ybWF0KS5zZXQoXCJEXCIsIHZhbHVlKS5mb3JtYXQodGhpcy5mb3JtYXQpO1xyXG4gIH1cclxuXHJcbiAgc2V0TW9udGgodmFsdWU6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZSA9IG1vbWVudCh0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdCkuc2V0KFwiTVwiLCB2YWx1ZSkuZm9ybWF0KHRoaXMuZm9ybWF0KTtcclxuICB9XHJcblxyXG4gIHNldFllYXIodmFsdWU6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZSA9IG1vbWVudCh0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdCkuc2V0KFwieWVhclwiLCB2YWx1ZSkuZm9ybWF0KHRoaXMuZm9ybWF0KTtcclxuICB9XHJcblxyXG4gIHNldEhvdXIodmFsdWU6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZSA9IG1vbWVudCh0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdCkuc2V0KFwiaFwiLCB2YWx1ZSkuZm9ybWF0KHRoaXMuZm9ybWF0KTtcclxuICB9XHJcblxyXG4gIHNldE1pbnV0ZSh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlID0gbW9tZW50KHRoaXMudmFsdWUsIHRoaXMuZm9ybWF0KS5zZXQoXCJtXCIsIHZhbHVlKS5mb3JtYXQodGhpcy5mb3JtYXQpO1xyXG4gICAgaWYgKHRoaXMuY29uZmlnLm1vZGUgPT0gXCJ0aW1lXCIpIHtcclxuICAgICAgdGhpcy5jb25maWcudGltZXBpY2tlciA9IFwiXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNvbmZpZy52aWV3ID0gXCJkYXRlcGlja2VyXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgYXBwbHkoKSB7XHJcbiAgICB0aGlzLm9uQXBwbHkodGhpcy52YWx1ZSk7XHJcbiAgICB0aGlzLmNsb3NlRGF0ZVBpY2tlcigpO1xyXG4gIH1cclxuXHJcblxyXG5cclxuICBvcGVuRGF0ZVBpY2tlcihldmVudDogYW55KSB7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgIHZhciBpbnN0ID0gdGhpcztcclxuICAgIGluc3Quc2hvdyA9IHRydWU7XHJcbiAgICBpZiAoaW5zdC5fdmFsdWUgPT0gXCJcIikge1xyXG4gICAgICBpbnN0Ll92YWx1ZSA9IG1vbWVudCgpLmZvcm1hdChpbnN0LmZvcm1hdCk7XHJcbiAgICB9XHJcbiAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciByZWN0cyA9IGluc3Quc2V0UG9zaXRpb24oKTtcclxuICAgICAgaWYgKHJlY3RzLmNvbnRhaW5lci5oZWlnaHQgPiAwKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaW5zdC5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgY2xvc2VEYXRlUGlja2VyKCkge1xyXG4gICAgdmFyIGluc3QgPSB0aGlzO1xyXG4gICAgaW5zdC5zaG93ID0gZmFsc2U7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICB2YXIgaW5zdCA9IHRoaXM7XHJcbiAgICBpbnN0LmVsZW1lbnQubmF0aXZlRWxlbWVudC5vbmZvY3VzID0gaW5zdC5vcGVuRGF0ZVBpY2tlci5iaW5kKHRoaXMpO1xyXG4gICAgaW5zdC5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQub25jbGljayA9IGluc3Qub3BlbkRhdGVQaWNrZXIuYmluZCh0aGlzKTtcclxuICAgIGluc3Quc2V0UG9zaXRpb24oKTtcclxuXHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW5zdC5zZXRQb3NpdGlvbigpO1xyXG4gICAgICAgIGluc3QuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGluc3Quc2V0UG9zaXRpb24oKTtcclxuICAgICAgICBpbnN0LmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgfTtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdmFyIGluc3QgPSB0aGlzO1xyXG4gIH1cclxufVxyXG4iLCI8ZGl2IGNsYXNzPVwiZGF0ZXBpY2tlci1vdmVybGF5XCIgKGNsaWNrKT1cImNsb3NlRGF0ZVBpY2tlcigpXCIgKm5nSWY9XCJzaG93XCI+PC9kaXY+XHJcbjxkaXYgI2NvbnRhaW5lciBjbGFzcz1cImRhdGVwaWNrZXItZml4ZWRcIiBbc3R5bGUudG9wLnB4XT1cImNvbmZpZy5wb3NpdGlvbi55XCIgW3N0eWxlLmxlZnQucHhdPVwiY29uZmlnLnBvc2l0aW9uLnhcIiAoY2xpY2spPVwic2V0UG9zaXRpb24oKVwiPlxyXG4gICAgPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItY29udGFpbmVyXCIgKm5nSWY9XCJzaG93XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItaGVhZGVyXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXRlcGlja2VyLWhlYWRlci1sYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItaGVhZGVyLWxhYmVsLWRhdGVcIiAqbmdJZj1cImNvbmZpZy5tb2RlID09ICdkYXRlJyB8fCBjb25maWcubW9kZSA9PSAnZGF0ZXRpbWUnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiAoY2xpY2spPVwiY29uZmlnLnZpZXc9J3llYXJwaWNrZXInXCIgY2xhc3M9XCJ7e2NvbmZpZy52aWV3ID09ICd5ZWFycGlja2VyJyA/ICdhY3RpdmUnIDogJyd9fVwiICpuZ0lmPVwiY29uZmlnLm1vZGUgPT0gJ2RhdGV0aW1lJ1wiPnt7Z2V0Rm9ybWF0ZWQoJ1lZWVknKX19PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiAoY2xpY2spPVwiY29uZmlnLnZpZXc9J21vbnRocGlja2VyJ1wiIGNsYXNzPVwie3tjb25maWcudmlldyA9PSAnbW9udGhwaWNrZXInID8gJ2FjdGl2ZScgOiAnJ319XCI+e3tnZXRGb3JtYXRlZCgnTU1NJyl9fTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIChjbGljayk9XCJjb25maWcudmlldz0nZGF0ZXBpY2tlcidcIiBjbGFzcz1cInt7Y29uZmlnLnZpZXcgPT0gJ2RhdGVwaWNrZXInID8gJ2FjdGl2ZScgOiAnJ319XCI+e3tnZXRGb3JtYXRlZCgnREQnKX19IDxzcGFuICpuZ0lmPVwiY29uZmlnLm1vZGUgPT0gJ2RhdGUnXCI+LCA8L3NwYW4+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gKGNsaWNrKT1cImNvbmZpZy52aWV3PSd5ZWFycGlja2VyJ1wiIGNsYXNzPVwie3tjb25maWcudmlldyA9PSAneWVhcnBpY2tlcicgPyAnYWN0aXZlJyA6ICcnfX1cIiAqbmdJZj1cImNvbmZpZy5tb2RlID09ICdkYXRlJ1wiPnt7Z2V0Rm9ybWF0ZWQoJ1lZWVknKX19PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXRlcGlja2VyLWhlYWRlci1sYWJlbC1kYXRlXCIgKm5nSWY9XCJjb25maWcubW9kZSA9PSAnbW9udGgnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImFjdGl2ZVwiPnt7Z2V0Rm9ybWF0ZWQoJ01NTU0nKX19PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXRlcGlja2VyLWhlYWRlci1sYWJlbC1kYXRlXCIgKm5nSWY9XCJjb25maWcubW9kZSA9PSAneWVhcidcIj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYWN0aXZlXCI+e3tnZXRGb3JtYXRlZCgnWVlZWScpfX08L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItaGVhZGVyLWxhYmVsLXRpbWVcIiAqbmdJZj1cImNvbmZpZy5tb2RlID09ICd0aW1lJyB8fCBjb25maWcubW9kZSA9PSAnZGF0ZXRpbWUnXCIgW3N0eWxlLnBhZGRpbmdUb3AucHhdPVwiY29uZmlnLm1vZGUgPT0gJ2RhdGV0aW1lJyA/IDI5IDogMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gKGNsaWNrKT1cImNvbmZpZy52aWV3PSd0aW1lcGlja2VyJztjb25maWcudGltZXBpY2tlcj0naG91cidcIiBjbGFzcz1cInt7Y29uZmlnLnZpZXcgPT0gJ3RpbWVwaWNrZXInICYmIGNvbmZpZy50aW1lcGlja2VyID09ICdob3VyJyA/ICdhY3RpdmUnIDogJyd9fVwiPnt7Z2V0Rm9ybWF0ZWQoJ2hoJyl9fTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPjo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiAoY2xpY2spPVwiY29uZmlnLnZpZXc9J3RpbWVwaWNrZXInO2NvbmZpZy50aW1lcGlja2VyPSdtaW51dGUnXCIgY2xhc3M9XCJ7e2NvbmZpZy52aWV3ID09ICd0aW1lcGlja2VyJyAmJiBjb25maWcudGltZXBpY2tlciA9PSAnbWludXRlJz8gJ2FjdGl2ZScgOiAnJ319XCI+e3tnZXRGb3JtYXRlZCgnbW0nKX19PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInt7aXNDdXJyZW50KCdhbScsJ2FtcG0nKSA/ICdhY3RpdmUnIDogJyd9fVwiIChjbGljayk9XCJzZXRBbVBtKCdBTScpXCI+QU08L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInt7aXNDdXJyZW50KCdwbScsJ2FtcG0nKSA/ICdhY3RpdmUnIDogJyd9fVwiIChjbGljayk9XCJzZXRBbVBtKCdQTScpXCI+UE08L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItaGVhZGVyLWFjdGlvblwiICpuZ0lmPVwiKGNvbmZpZy5tb2RlID09ICdkYXRlJyB8fCBjb25maWcubW9kZSA9PSAnZGF0ZXRpbWUnKSAmJiBjb25maWcudmlldyA9PSAnZGF0ZXBpY2tlcidcIj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gKGNsaWNrKT1cInNldFByZXZNb250aCgpXCI+PGkgY2xhc3M9XCJmYSBmYS1hcnJvdy1sZWZ0XCI+PC9pPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPGRpdj57e2dldEZvcm1hdGVkKCdNTU1NIEREJyl9fTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiAoY2xpY2spPVwic2V0TmV4dE1vbnRoKClcIj48aSBjbGFzcz1cImZhIGZhLWFycm93LXJpZ2h0XCI+PC9pPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItaGVhZGVyLWFjdGlvblwiICpuZ0lmPVwiKGNvbmZpZy5tb2RlID09ICdkYXRlJyB8fCBjb25maWcubW9kZSA9PSAnZGF0ZXRpbWUnIHx8IGNvbmZpZy5tb2RlID09ICd5ZWFyJykgJiYgY29uZmlnLnZpZXcgPT0gJ3llYXJwaWNrZXInXCI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIChjbGljayk9XCJzZXRQcmV2WWVhclJhbmdlKClcIj48aSBjbGFzcz1cImZhIGZhLWFycm93LWxlZnRcIj48L2k+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8ZGl2Pnt7Y29uZmlnLnN0YXJ0WWVhciAtIDh9fSAtIHt7Y29uZmlnLnN0YXJ0WWVhciArIDd9fTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiAoY2xpY2spPVwic2V0TmV4dFllYXJSYW5nZSgpXCI+PGkgY2xhc3M9XCJmYSBmYS1hcnJvdy1yaWdodFwiPjwvaT48L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItYm9keVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF0ZXBpY2tlci1kYXRlcGlja2VyXCIgKm5nSWY9XCJjb25maWcudmlldyA9PSAnZGF0ZXBpY2tlcicgJiYgKGNvbmZpZy5tb2RlID09ICdkYXRlJyB8fCBjb25maWcubW9kZSA9PSAnZGF0ZXRpbWUnKVwiPlxyXG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiZGF0ZXBpY2tlci13ZWVrc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaSAqbmdGb3I9XCJsZXQgd2VlayBvZiBjb25maWcud2Vla3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e3tsaW1pdENoYXIod2VlaywzKX19PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICA8L3VsPlxyXG5cclxuICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImRhdGVwaWNrZXItZGF0ZXNcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGkgKm5nRm9yPVwibGV0IGQgb2YgZ2V0UHJlZml4RGF5cygpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaSAqbmdGb3I9XCJsZXQgZCBvZiBnZXREYXRlc0luTW9udGhBcnJheSgpO3RyYWNrQnk6dHJhY2tCeVwiIGNsYXNzPVwie3tpc0N1cnJlbnQoZC5mb3JtYXRlZCwnZGF0ZScpID8gJ2FjdGl2ZScgOiAnJ319XCIgKGNsaWNrKT1cInNldERhdGUoZC5kYXRlKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57e2QuZGF0ZX19PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBpY2tlclwiICpuZ0lmPVwiY29uZmlnLnZpZXcgPT0gJ3RpbWVwaWNrZXInXCI+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cImNvbmZpZy50aW1lcGlja2VyID09ICdob3VyJ1wiPlNlbGVjdCBIb3VyPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwicGlja2VyLWNvbC0zXCIgKm5nSWY9XCJjb25maWcudGltZXBpY2tlciA9PSAnaG91cidcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGkgKm5nRm9yPVwibGV0IG4gb2YgZ2V0QXJyYXlPZigxMik7bGV0IGggPSBpbmRleFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwie3tpc0N1cnJlbnQoaCsxLCdob3VyJykgPyAnYWN0aXZlJyA6ICcnfX1cIiAoY2xpY2spPVwic2V0SG91cihoKzEpO2NvbmZpZy50aW1lcGlja2VyID0gJ21pbnV0ZSdcIj57e2grMX19PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cImNvbmZpZy50aW1lcGlja2VyID09ICdtaW51dGUnXCI+U2VsZWN0IG1pbnV0ZTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cInBpY2tlci1jb2wtNlwiICpuZ0lmPVwiY29uZmlnLnRpbWVwaWNrZXIgPT0gJ21pbnV0ZSdcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGkgKm5nRm9yPVwibGV0IG4gb2YgZ2V0QXJyYXlPZig2MCk7bGV0IG0gPSBpbmRleFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwie3tpc0N1cnJlbnQobSsxLCdtaW51dGUnKSA/ICdhY3RpdmUnIDogJyd9fVwiIChjbGljayk9XCJzZXRNaW51dGUobSsxKVwiPnt7bSsxfX08L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwaWNrZXJcIiAqbmdJZj1cImNvbmZpZy52aWV3ID09ICdtb250aHBpY2tlcicgfHwgY29uZmlnLm1vZGUgPT0gJ21vbnRoJ1wiPlxyXG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwicGlja2VyLWNvbC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpICpuZ0Zvcj1cImxldCBtb250aCBvZiBjb25maWcubW9udGhzO2xldCBtID0gaW5kZXhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiAoY2xpY2spPVwic2V0TW9udGgobSk7Y29uZmlnLnZpZXcgPSAnZGF0ZXBpY2tlcidcIiBjbGFzcz1cInt7aXNDdXJyZW50KG0rMSArICcnLCdtb250aCcpID8gJ2FjdGl2ZScgOiAnJ319XCI+e3ttb250aH19PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGlja2VyXCIgKm5nSWY9XCJjb25maWcudmlldyA9PSAneWVhcnBpY2tlcicgIHx8IGNvbmZpZy5tb2RlID09ICd5ZWFyJ1wiPlxyXG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwicGlja2VyLWNvbC00XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpICpuZ0Zvcj1cImxldCB5ZWFyIG9mIGdldFllYXJzUmFuZ2UoKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwie3tpc0N1cnJlbnQoeWVhciwneWVhcicpID8gJ2FjdGl2ZScgOiAnJ319XCIgKGNsaWNrKT1cInNldFllYXIoeWVhcik7Y29uZmlnLnZpZXcgPSBjb25maWcubW9kZSA9PSAneWVhcicgPyAneWVhcnBpY2tlcicgOiAnZGF0ZXBpY2tlcidcIj57e3llYXJ9fTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGF0ZXBpY2tlci1mb290ZXJcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiAoY2xpY2spPVwiY2xvc2VEYXRlUGlja2VyKClcIj5DYW5jZWw8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiAoY2xpY2spPVwiYXBwbHkoKVwiPkFwcGx5PC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+Il19